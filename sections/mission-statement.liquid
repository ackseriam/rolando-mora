{% comment %}
  Mission Statement — "We Believe That" section
  Replicates goPure Beauty homepage mission/values block with mixed typography and background texture.
{% endcomment %}
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,400&display=swap">

{%- liquid
  assign color_plum = section.settings.color_plum | default: '#3F27AE'
  assign heading_raw = section.settings.heading | replace: '<p>', '' | replace: '</p>', ''
  assign heading_html = heading_raw | replace: '<em>', '<span class="mission-heading__script">' | replace: '</em>', '</span>'
-%}

<style>
  #shopify-section-{{ section.id }} .mission-statement-wrapper {
    position: relative;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    text-align: center;
    overflow: hidden;
  }

  @media (min-width: 992px) {
    #shopify-section-{{ section.id }} .mission-statement-wrapper {
      padding-top: {{ section.settings.padding_top_desktop | default: 112 }}px;
      padding-bottom: {{ section.settings.padding_bottom_desktop | default: 112 }}px;
    }
  }

  #shopify-section-{{ section.id }} .mission-background-texture {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  #shopify-section-{{ section.id }} .mission-background-texture img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.5;
  }

  #shopify-section-{{ section.id }} .mission-inner-wrapper {
    position: relative;
    z-index: 1;
    max-width: 42rem;
    margin: 0 auto;
    padding-inline: 1rem;
  }

  @media (min-width: 992px) {
    #shopify-section-{{ section.id }} .mission-inner-wrapper {
      padding-inline: var(--padding-lg, 1rem);
    }
  }

  #shopify-section-{{ section.id }} .mission-pre-heading {
    font-family: var(--font-heading--family, "Landour Regular Text", "Landour", sans-serif);
    color: {{ color_plum }};
    font-weight: 600;
    font-size: var(--font-size--md, 1rem);
    margin-bottom: var(--margin-md, 0.8rem);
    line-height: 1.2;
  }

  @media (min-width: 992px) {
    #shopify-section-{{ section.id }} .mission-pre-heading {
      font-size: var(--font-size--lg, 1.125rem);
    }
  }

  #shopify-section-{{ section.id }} .mission-heading {
    font-family: var(--font-heading--family, "Landour Regular Text", "Landour", sans-serif);
    font-weight: 600;
    font-size: var(--font-size--xl, 1.25rem);
    color: {{ color_plum }};
    margin-bottom: var(--margin-lg, 1rem);
    line-height: 1.2;
  }

  @media (min-width: 992px) {
    #shopify-section-{{ section.id }} .mission-heading {
      font-size: var(--font-size--4xl, 2.5rem);
      margin-bottom: var(--margin-2xl, 1.5rem);
    }
  }

  #shopify-section-{{ section.id }} .mission-heading__script {
    font-family: "Playfair Display", Georgia, "Times New Roman", serif;
    font-weight: 400;
    font-style: italic;
    text-transform: lowercase;
  }

  #shopify-section-{{ section.id }} .mission-byline {
    font-family: var(--font-heading--family, "Landour Regular Text", "Landour", sans-serif);
    color: {{ color_plum }};
    font-weight: 600;
    font-size: var(--font-size--md, 1rem);
    margin-top: var(--margin-xl, 1.25rem);
    margin-bottom: var(--margin-2xl, 1.5rem);
  }

  @media (min-width: 992px) {
    #shopify-section-{{ section.id }} .mission-byline {
      font-size: var(--font-size--lg, 1.125rem);
    }
  }

  #shopify-section-{{ section.id }} .mission-statement-wrapper .mission-cta {
    --button-color: {{ color_plum }};
    --button-background-color: transparent;
    --button-border-color: {{ color_plum }};
    --button-border-width: 2px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--button-padding-block, 16px) var(--button-padding-inline, 24px);
    font-family: var(--button-font-family-secondary, var(--font-heading--family));
    font-weight: 600;
    font-size: var(--font-size--md, 1rem);
    text-decoration: none;
    border-radius: var(--style-border-radius-buttons-secondary, 0.6rem);
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  #shopify-section-{{ section.id }} .mission-statement-wrapper .mission-cta:hover {
    --button-color: #fff;
    --button-background-color: {{ color_plum }};
    --button-border-color: {{ color_plum }};
  }

  #shopify-section-{{ section.id }} .mission-statement-wrapper .mission-cta[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }
</style>

<section class="mission-statement-wrapper section-mission-statement" data-section-id="{{ section.id }}" aria-labelledby="mission-heading-{{ section.id }}">
  {%- if section.settings.show_background_texture -%}
    {%- if section.settings.background_desktop != blank or section.settings.background_mobile != blank -%}
      <picture class="mission-background-texture" aria-hidden="true">
        {%- if section.settings.background_desktop != blank -%}
          <source
            media="(min-width: 992px)"
            srcset="{{ section.settings.background_desktop | image_url: width: 1920 }}"
          >
        {%- endif -%}
        <img
          src="{{ section.settings.background_mobile | default: section.settings.background_desktop | image_url: width: 390 }}"
          srcset="{{ section.settings.background_mobile | default: section.settings.background_desktop | image_url: width: 390 }} 390w,
                  {{ section.settings.background_mobile | default: section.settings.background_desktop | image_url: width: 780 }} 780w"
          alt=""
          width="390"
          height="353"
          loading="lazy"
          fetchpriority="low"
        >
      </picture>
    {%- endif -%}
  {%- endif -%}

  <div class="mission-inner-wrapper">
    {%- if section.settings.pre_heading != blank -%}
      <p class="mission-pre-heading">{{ section.settings.pre_heading | escape }}</p>
    {%- endif -%}

    {%- if section.settings.heading != blank -%}
      <h2 id="mission-heading-{{ section.id }}" class="mission-heading">
        {{ heading_html }}
      </h2>
    {%- endif -%}

    {%- if section.settings.byline != blank -%}
      <p class="mission-byline">{{ section.settings.byline | escape }}</p>
    {%- endif -%}

    {%- if section.settings.button_text != blank -%}
      <a
        href="{{ section.settings.button_link | default: '#' }}"
        class="mission-cta button button-secondary"
        {% if section.settings.button_link == blank %}aria-disabled="true"{% endif %}
      >
        {{ section.settings.button_text | escape }}
      </a>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Mission Statement",
  "tag": "section",
  "class": "section-mission-statement",
  "settings": [
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "checkbox",
      "id": "show_background_texture",
      "label": "Show background texture",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "background_desktop",
      "label": "Background texture (desktop)",
      "info": "Recommended: 1920×1080px. e.g. soft-gray-background-light-rays.png"
    },
    {
      "type": "image_picker",
      "id": "background_mobile",
      "label": "Background texture (mobile)",
      "info": "Recommended: 390×353px. e.g. soft-light-shadow-background.png"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "pre_heading",
      "label": "Pre-heading",
      "default": "We believe that"
    },
    {
      "type": "richtext",
      "id": "heading",
      "label": "Main heading",
      "default": "<p>Feeling <em>beautiful</em> & <em>confident</em> should be within reach <em>for everyone</em></p>",
      "info": "Use italic (or <em>) for script-style words: beautiful, confident, for everyone"
    },
    {
      "type": "text",
      "id": "byline",
      "label": "Byline",
      "default": "–Co-founders Alex & Erin"
    },
    {
      "type": "color",
      "id": "color_plum",
      "label": "Text color (plum)",
      "default": "#3F27AE"
    },
    {
      "type": "header",
      "content": "Call to action"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link",
      "info": "e.g. /about"
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Padding top (mobile)",
      "default": 96
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom (mobile)",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Padding top (desktop)",
      "default": 112
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom (desktop)",
      "default": 112
    }
  ],
  "presets": [
    {
      "name": "Mission Statement"
    }
  ]
}
{% endschema %}
