<style>
  .consumer-approved {
    background-color: {{ section.settings.background_color }};
    padding: 3rem 0;
    text-align: center;
    overflow: hidden;
  }

  @media (min-width: 990px) {
    .consumer-approved {
      padding: 5rem 0;
    }
  }

  .consumer-approved__container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .consumer-approved__heading {
    font-family: 'Playfair Display', Georgia, 'Times New Roman', serif;
    font-weight: 400;
    font-style: italic;
    font-size: 1.5rem;
    line-height: 1.2;
    margin: 0;
    color: #1a1a1a;
  }

  @media (min-width: 990px) {
    .consumer-approved__heading {
      font-size: 3rem;
    }
  }

  .consumer-approved__cards {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    margin-top: 1.5rem;
    position: relative;
  }

  @media (min-width: 990px) {
    .consumer-approved__cards {
      flex-direction: row;
      justify-content: center;
      gap: 3rem;
      margin-top: 5rem;
    }
  }

  .consumer-approved__card {
    background-color: #FFFBF5;
    border-radius: 0.8rem;
    padding: 2.5rem 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    max-width: 340px;
    min-height: 220px;
    font-family: 'Montserrat', 'Landour Regular Text', 'Landour', sans-serif;
    font-weight: 600;
    color: #1a1a1a;
    transition: transform 0.9s cubic-bezier(0.33, 1, 0.68, 1),
                opacity 0.9s cubic-bezier(0.33, 1, 0.68, 1);
    will-change: transform, opacity;
  }

  @media (min-width: 990px) {
    .consumer-approved__card {
      flex: 1;
      max-width: none;
      padding: 3rem 2rem;
    }
  }

  /* Initial state â€” before scroll trigger fires */
  .consumer-approved__card {
    opacity: 0;
  }

  /* Mobile: slide up on reveal */
  @media (max-width: 989px) {
    .consumer-approved__card {
      transform: translateY(40px);
    }

    .consumer-approved__cards.is-visible .consumer-approved__card {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Desktop: cards start stacked, then fan out */
  @media (min-width: 990px) {
    .consumer-approved__card {
      transform: rotate(0deg) translateX(0px) scale(0.96);
    }

    .consumer-approved__cards.is-visible .consumer-approved__card--0 {
      transform: rotate(-5.03deg) translateX(78.33px);
      opacity: 1;
    }

    .consumer-approved__cards.is-visible .consumer-approved__card--1 {
      transform: rotate(0.698deg) translateX(0px);
      opacity: 1;
    }

    .consumer-approved__cards.is-visible .consumer-approved__card--2 {
      transform: rotate(2.27deg) translateX(-78.33px);
      opacity: 1;
    }
  }

  /* Stagger animation timing */
  .consumer-approved__card--0 {
    transition-delay: 0s;
  }

  .consumer-approved__card--1 {
    transition-delay: 0.15s;
  }

  .consumer-approved__card--2 {
    transition-delay: 0.3s;
  }

  .consumer-approved__number {
    font-family: 'Playfair Display', Georgia, 'Times New Roman', serif;
    font-weight: 400;
    font-style: italic;
    font-size: 3.5rem;
    line-height: 1;
    margin-bottom: 0.75rem;
    color: #1a1a1a;
    display: block;
  }

  @media (min-width: 990px) {
    .consumer-approved__number {
      font-size: 4.5rem;
    }
  }

  .consumer-approved__description {
    font-family: 'Montserrat', 'Landour Regular Text', 'Landour', sans-serif;
    font-weight: 600;
    font-size: 1rem;
    line-height: 1.2;
    margin: 0;
    color: #1a1a1a;
    max-width: 240px;
  }

  .consumer-approved__disclaimer {
    margin-top: 2.5rem;
    font-size: 0.875rem;
    color: #555;
    font-family: 'Montserrat', 'Landour Regular Text', 'Landour', sans-serif;
    font-weight: 400;
  }

  @media (min-width: 990px) {
    .consumer-approved__disclaimer {
      margin-top: 1.25rem;
    }
  }
</style>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,400&family=Montserrat:wght@400;600;700&display=swap">

<section class="consumer-approved" data-section-id="{{ section.id }}">
  <div class="consumer-approved__container">
    <h2 class="consumer-approved__heading">{{ section.settings.heading }}</h2>

    <div class="consumer-approved__cards" id="consumer-approved-cards-{{ section.id }}">
      <div class="consumer-approved__card consumer-approved__card--0">
        <span class="consumer-approved__number">{{ section.settings.card_1_percentage }}</span>
        <p class="consumer-approved__description">{{ section.settings.card_1_description }}</p>
      </div>

      <div class="consumer-approved__card consumer-approved__card--1">
        <span class="consumer-approved__number">{{ section.settings.card_2_percentage }}</span>
        <p class="consumer-approved__description">{{ section.settings.card_2_description }}</p>
      </div>

      <div class="consumer-approved__card consumer-approved__card--2">
        <span class="consumer-approved__number">{{ section.settings.card_3_percentage }}</span>
        <p class="consumer-approved__description">{{ section.settings.card_3_description }}</p>
      </div>
    </div>

    <p class="consumer-approved__disclaimer">{{ section.settings.disclaimer }}</p>
  </div>
</section>

<script>
  (function () {
    var sectionId = '{{ section.id }}';
    var cardsContainer = document.getElementById('consumer-approved-cards-' + sectionId);

    if (!cardsContainer) return;

    if ('IntersectionObserver' in window) {
      var observer = new IntersectionObserver(
        function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target);
            }
          });
        },
        {
          threshold: 0.2,
          rootMargin: '0px 0px -50px 0px'
        }
      );

      observer.observe(cardsContainer);
    } else {
      /* Fallback for browsers without IntersectionObserver */
      cardsContainer.classList.add('is-visible');
    }
  })();
</script>

{% schema %}
{
  "name": "Consumer Approved",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Consumer Approved"
    },
    {
      "type": "text",
      "id": "card_1_percentage",
      "label": "Card 1 Percentage",
      "default": "100%"
    },
    {
      "type": "textarea",
      "id": "card_1_description",
      "label": "Card 1 Description",
      "default": "Said their skin looked more supple"
    },
    {
      "type": "text",
      "id": "card_2_percentage",
      "label": "Card 2 Percentage",
      "default": "97%"
    },
    {
      "type": "textarea",
      "id": "card_2_description",
      "label": "Card 2 Description",
      "default": "Said their skin appeared firmer"
    },
    {
      "type": "text",
      "id": "card_3_percentage",
      "label": "Card 3 Percentage",
      "default": "97%"
    },
    {
      "type": "textarea",
      "id": "card_3_description",
      "label": "Card 3 Description",
      "default": "Said their crepey skin looked more even and smooth"
    },
    {
      "type": "textarea",
      "id": "disclaimer",
      "label": "Disclaimer Text",
      "default": "*Based on consumer perception questionnaire of 32 subjects after 4 weeks"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#EDE5F5"
    }
  ],
  "presets": [
    {
      "name": "Consumer Approved"
    }
  ]
}
{% endschema %}
